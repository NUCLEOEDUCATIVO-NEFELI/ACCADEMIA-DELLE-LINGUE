<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ACCADEMIA DELLE LINGUE - Livello A1 - C2 QCER</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #1e3a5f;
            --primary-dark: #152a45;
            --secondary: #8b0000;
            --success: #276749;
            --error: #c53030;
            --bg-primary: #f5f5f0;
            --bg-card: #ffffff;
            --border: #d4d4c8;
            --text-primary: #2c3e50;
            --text-secondary: #5a6c7d;
            --accent: #c9a227;
            --level-a1: #276749;
            --level-a2: #2563eb;
            --level-b1: #c9a227;
            --level-b2: #dc2626;
        }
        
        body { 
            font-family: 'Georgia', 'Times New Roman', serif; 
            background: var(--bg-primary); 
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* LOGIN STYLES */
        .login-section { 
            min-height: 100vh; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            background: var(--bg-primary);
            padding: 20px; 
        }
        
        .login-container { 
            width: 100%; 
            max-width: 480px; 
            background: var(--bg-card); 
            border-radius: 0; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
            overflow: hidden;
            border: 1px solid var(--border);
        }
        
        .login-header { 
            background: var(--primary); 
            padding: 40px 30px; 
            text-align: center; 
            color: white;
        }

        .login-logo { 
            font-size: 3rem; 
            margin-bottom: 16px; 
        }
        
        .login-body { 
            padding: 32px; 
        }
        
        .form-group { 
            margin-bottom: 20px; 
        }
        
        .form-label { 
            display: block; 
            font-size: 0.875rem; 
            font-weight: 600; 
            margin-bottom: 8px;
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .form-input { 
            width: 100%; 
            padding: 12px 16px; 
            border: 1px solid var(--border); 
            border-radius: 0; 
            font-size: 1rem;
            font-family: inherit;
            background: #fafafa;
        }
        
        .form-input:focus { 
            outline: none; 
            border-color: var(--primary);
            background: white;
        }
        
        textarea.form-input {
            min-height: 100px;
            resize: vertical;
        }
        
        .btn { 
            width: 100%; 
            padding: 14px; 
            background: var(--primary); 
            color: white; 
            border: none; 
            border-radius: 0; 
            font-size: 1rem; 
            font-weight: 600; 
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s;
        }
        
        .btn:hover { 
            background: var(--primary-dark);
        }
        
        .btn-secondary { 
            background: transparent; 
            color: var(--primary); 
            border: 2px solid var(--primary); 
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }
        
        .btn-success { 
            background: var(--success); 
        }

        .btn-danger {
            background: var(--error);
        }
        
        .btn-a1 { background: var(--level-a1); }
        .btn-a2 { background: var(--level-a2); }
        .btn-b1 { background: var(--level-b1); color: #000; }
        .btn-b2 { background: var(--level-b2); }
        
        .form-footer { 
            text-align: center; 
            margin-top: 24px; 
            padding-top: 24px; 
            border-top: 1px solid var(--border); 
        }
        
        .form-footer a { 
            color: var(--primary); 
            font-weight: 600; 
            text-decoration: none; 
            cursor: pointer;
        }
        
        .form-footer a:hover { 
            text-decoration: underline; 
        }

        .alert { 
            padding: 12px 16px; 
            border-radius: 0; 
            margin-bottom: 16px; 
            display: none;
            border-left: 4px solid;
        }
        
        .alert-error { 
            background: #fed7d7; 
            color: var(--error); 
            display: block;
            border-left-color: var(--error);
        }
        
        .alert-success { 
            background: #c6f6d5; 
            color: var(--success); 
            display: block;
            border-left-color: var(--success);
        }

        .password-strength-indicator {
            display: flex;
            gap: 4px;
            margin-top: 8px;
            height: 4px;
        }
        
        .strength-bar {
            flex: 1;
            background: #e2e8f0;
            border-radius: 2px;
            transition: all 0.3s;
        }
        
        .strength-bar.weak { background: var(--error); }
        .strength-bar.medium { background: var(--accent); }
        .strength-bar.strong { background: var(--success); }

        /* DASHBOARD STYLES */
        .dashboard { 
            display: none; 
            min-height: 100vh; 
            flex-direction: column;
        }
        
        .top-nav { 
            background: var(--primary); 
            color: white; 
            padding: 0 24px; 
            height: 64px; 
            display: flex; 
            align-items: center; 
            justify-content: space-between;
            border-bottom: 3px solid var(--secondary);
            flex-shrink: 0;
        }
        
        .main-container { 
            display: flex; 
            flex: 1;
            height: calc(100vh - 64px);
            overflow: hidden;
        }
        
        .sidebar { 
            width: 300px; 
            background: var(--bg-card); 
            border-right: 1px solid var(--border); 
            padding: 24px 0;
            box-shadow: 2px 0 4px rgba(0,0,0,0.05);
            overflow-y: auto;
            flex-shrink: 0;
        }
        
        .nav-item { 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            padding: 12px 16px; 
            margin: 0 12px 4px 12px;
            border-radius: 0; 
            cursor: pointer; 
            color: var(--text-secondary);
            border-left: 3px solid transparent;
            transition: all 0.2s;
            font-size: 0.9rem;
            text-decoration: none;
        }
        
        .nav-item:hover { 
            background: var(--bg-primary); 
            color: var(--text-primary);
            border-left-color: var(--border);
        }
        
        .nav-item.active { 
            background: var(--bg-primary); 
            color: var(--primary);
            border-left-color: var(--secondary);
            font-weight: 600;
        }

        .nav-level {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 2px 6px;
            border-radius: 0;
            margin-left: auto;
            font-weight: bold;
        }

        .level-a1 { background: var(--level-a1); color: white; }
        .level-a2 { background: var(--level-a2); color: white; }
        .level-b1 { background: var(--level-b1); color: #000; }
        .level-b2 { background: var(--level-b2); color: white; }
        
        .content { 
            flex: 1; 
            background: var(--bg-primary);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* IFRAME CONTAINER */
        .iframe-container {
            flex: 1;
            width: 100%;
            height: 100%;
            background: white;
        }

        .content-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }
        
        .section { 
            display: none; 
            flex: 1;
            flex-direction: column;
            height: 100%;
            overflow: auto;
            padding: 32px;
        }
        
        .section.active { 
            display: flex; 
        }
        
        .card { 
            background: var(--bg-card); 
            border-radius: 0; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.08); 
            border: 1px solid var(--border); 
            margin-bottom: 24px; 
        }
        
        .card-header { 
            padding: 20px 24px; 
            border-bottom: 2px solid var(--border); 
            font-weight: 600;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.95rem;
        }
        
        .card-body { 
            padding: 24px; 
        }
        
        .games-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 24px; 
        }
        
        .game-card { 
            background: var(--bg-card); 
            border-radius: 0; 
            overflow: hidden; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.08); 
            border: 1px solid var(--border); 
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            text-decoration: none;
            display: block;
            color: inherit;
        }
        
        .game-card:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 16px rgba(0,0,0,0.12);
            border-color: var(--primary);
        }

        .game-level-badge {
            position: absolute;
            top: 0;
            right: 0;
            padding: 6px 12px;
            font-size: 0.75rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .game-image { 
            height: 160px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 3.5rem;
            border-bottom: 3px solid;
        }

        .bg-a1 { background: linear-gradient(135deg, var(--level-a1) 0%, #1e5c3e 100%); border-color: var(--level-a1); color: white; }
        .bg-a2 { background: linear-gradient(135deg, var(--level-a2) 0%, #1e40af 100%); border-color: var(--level-a2); color: white; }
        .bg-b1 { background: linear-gradient(135deg, var(--level-b1) 0%, #a88c1c 100%); border-color: var(--level-b1); color: #000; }
        .bg-b2 { background: linear-gradient(135deg, var(--level-b2) 0%, #b91c1c 100%); border-color: var(--level-b2); color: white; }
        
        .game-content { 
            padding: 20px; 
        }
        
        .game-title { 
            font-size: 1.1rem; 
            font-weight: 600; 
            margin-bottom: 8px;
            color: var(--primary);
        }

        .game-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-style: italic;
        }

        .breadcrumbs {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            padding: 12px 24px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin: -32px -32px 24px -32px;
            flex-shrink: 0;
        }

        .breadcrumbs strong {
            color: var(--text-primary);
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            padding: 24px;
            text-align: center;
            border-left: 4px solid var(--secondary);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
            font-family: 'Times New Roman', serif;
        }

        .section-title {
            font-size: 1.75rem;
            color: var(--primary);
            font-weight: normal;
            margin-bottom: 8px;
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 12px;
        }

        .section-subtitle {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 24px;
        }

        .level-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }

        .level-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .level-card:hover, .level-card.active {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .level-card.active {
            background: var(--bg-primary);
        }

        .level-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .level-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .level-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .menu-category {
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin: 16px 12px 8px 12px;
            padding-left: 12px;
            letter-spacing: 1px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 4px;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 0;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-completed { background: var(--success); color: white; }
        .status-pending { background: var(--accent); color: #000; }

        /* ADMIN STYLES */
        .stats-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 20px; 
            margin-bottom: 32px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 0;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            border: 1px solid var(--border);
        }
        .data-table th {
            background: var(--primary);
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.5px;
        }
        .data-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }
        .data-table tr:hover {
            background: var(--bg-primary);
        }

        .badge {
            padding: 0.25rem 0.75rem;
            border-radius: 0;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        .badge-pending {
            background: #fef3c7;
            color: #92400e;
        }
        .badge-approved {
            background: #dcfce7;
            color: #166534;
        }

        .password-box {
            background: #f0fdf4;
            border: 2px dashed var(--success);
            padding: 2rem;
            text-align: center;
        }
        .password-display {
            font-family: 'Courier New', monospace;
            font-size: 2rem;
            color: var(--primary);
            background: white;
            padding: 1rem;
            margin: 1rem 0;
            letter-spacing: 2px;
            border: 2px solid var(--border);
        }

        @media (max-width: 1024px) {
            .sidebar {
                width: 260px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: fixed;
                bottom: 0;
                left: 0;
                z-index: 100;
                max-height: 60vh;
                overflow-y: auto;
                display: none;
            }
            
            .games-grid {
                grid-template-columns: 1fr;
            }

            .level-selector {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    @media (max-width: 1024px) {
            .sidebar {
                width: 280px;
            }
            .level-selector {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .top-nav {
                height: auto;
                min-height: 64px;
                padding: 12px 16px;
                flex-direction: column;
                gap: 10px;
            }

            .top-nav > div:first-child {
                width: 100%;
                justify-content: center;
            }

            .top-nav > div:last-child {
                width: 100%;
                justify-content: space-between;
            }

            .main-container {
                flex-direction: column;
                height: auto;
            }

            .sidebar {
                width: 100%;
                max-height: 50vh;
                overflow-y: auto;
                border-right: none;
                border-bottom: 3px solid var(--secondary);
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                order: 2;
            }

            .content {
                order: 1;
                height: auto;
                min-height: calc(100vh - 200px);
            }

            .section {
                padding: 16px;
            }

            .breadcrumbs {
                margin: -16px -16px 16px -16px;
                padding: 10px 16px;
            }

            .games-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .level-selector {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .level-card {
                padding: 16px;
            }

            .level-icon {
                font-size: 2rem;
            }

            .level-name {
                font-size: 1.2rem;
            }

            .section-title {
                font-size: 1.4rem;
            }

            .card-header {
                padding: 16px;
                font-size: 0.9rem;
            }

            .card-body {
                padding: 16px;
            }

            .game-image {
                height: 120px;
                font-size: 2.5rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .stat-value {
                font-size: 1.8rem;
            }

            .login-header {
                padding: 30px 20px;
            }

            .login-logo {
                font-size: 2.5rem;
            }

            .login-body {
                padding: 24px;
            }

            .nav-item {
                padding: 14px 16px;
                font-size: 1rem;
            }

            .iframe-container {
                height: 60vh;
            }

            .data-table {
                font-size: 0.85rem;
            }

            .data-table th,
            .data-table td {
                padding: 0.75rem 0.5rem;
            }
        }

        @media (max-width: 480px) {
            .level-selector {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .top-nav h1 {
                font-size: 1rem;
            }

            .section-title {
                font-size: 1.2rem;
            }

            .btn {
                padding: 12px;
                font-size: 0.9rem;
            }
        }
        .mobile-menu-toggle {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 12px;
            font-size: 1.2rem;
            cursor: pointer;
            border-radius: 4px;
            display: none;
        }

        .sidebar.mobile-open {
            display: block !important;
            position: fixed;
            top: 0;
            left: 0;
            width: 280px;
            height: 100vh;
            z-index: 1000;
            box-shadow: 4px 0 12px rgba(0,0,0,0.3);
        }

        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .sidebar-overlay.active {
            display: block;
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            .sidebar {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 280px;
                height: 100vh;
                z-index: 1000;
                max-height: 100vh;
            }

            .sidebar.mobile-open {
                display: block;
            }
        }
</style>
<base target="_blank">
<base target="_blank">
</head>
<body>

<!-- ==================== LOGIN SECTION ==================== -->
<div id="loginSection" class="login-section">
    <div class="login-container">
        <div class="login-header">
            <div class="login-logo">ğŸ“</div>
            <h1 style="font-size: 1.3rem; line-height: 1.3; font-weight: normal;">ACCADEMIA DELLE LINGUE</h1>
            <p style="font-size: 0.8rem; margin-top: 8px; font-style: italic;">Nucleo Educativo per la Formazione Europea al Lavoro Internazionale</p>
            <p style="font-size: 0.75rem; margin-top: 4px; opacity: 0.8;">Livello A1 - C2 QCER</p>
        </div>
        <div class="login-body">
            <form id="loginForm">
                <div class="alert alert-error" id="loginError"></div>
                <div class="form-group">
                    <label class="form-label">Indirizzo Email</label>
                    <input type="email" id="loginEmail" class="form-input" required placeholder="nome@istituzione.edu"/>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="loginPassword" class="form-input" required placeholder="Inserire password" oninput="checkPasswordStrength()"/>
                    
                    <div class="password-strength-indicator" id="strengthIndicator">
                        <div class="strength-bar" id="bar1"></div>
                        <div class="strength-bar" id="bar2"></div>
                        <div class="strength-bar" id="bar3"></div>
                        <div class="strength-bar" id="bar4"></div>
                    </div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 4px;" id="strengthText">
                        Digita la password per vedere la forza
                    </div>
                </div>
                <button type="submit" class="btn">Accedi alla Piattaforma</button>
                
                <div style="margin-top: 20px; padding: 16px; background: #f7fafc; border: 1px solid var(--border); font-size: 0.8rem;">
                    <strong>ğŸ”§ ModalitÃ  Debug:</strong> Per testare, inserisci qualsiasi email e una password di almeno 6 caratteri. Il sistema funzionerÃ  in modalitÃ  demo.
                </div>

                <div class="form-footer">
                    <p>Non si possiedono credenziali? <a onclick="showRequestAccess()">Richiedi accesso</a></p>
                    <p style="margin-top: 8px;"><a onclick="showAdminLogin()">Accesso Amministratore</a></p>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- ==================== RICHIESTA ACCESSO SECTION ==================== -->
<div id="requestAccess" class="login-section" style="display: none;">
    <div class="login-container">
        <div class="login-header">
            <div class="login-logo">ğŸ“</div>
            <h1 style="font-size: 1.3rem; line-height: 1.3; font-weight: normal;">RICHIESTA ACCESSO</h1>
            <p style="font-size: 0.8rem; margin-top: 8px; font-style: italic;">Compila il modulo per richiedere le credenziali di accesso</p>
        </div>
        <div class="login-body">
            <div id="requestAlert" class="alert"></div>
            <form id="requestForm">
                <div class="form-group">
                    <label class="form-label">Nome completo *</label>
                    <input type="text" id="reqName" class="form-input" placeholder="Mario Rossi" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email *</label>
                    <input type="email" id="reqEmail" class="form-input" placeholder="mario.rossi@email.it" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Motivazione della richiesta *</label>
                    <textarea id="reqMotivation" class="form-input" placeholder="Spiega perchÃ© vuoi accedere alla piattaforma..." required></textarea>
                </div>
                <button type="submit" class="btn">ğŸ“¤ Invia Richiesta</button>
                <div class="form-footer">
                    <p><a onclick="backToLogin()">â† Torna al login</a></p>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- ==================== ADMIN LOGIN SECTION ==================== -->
<div id="adminLoginSection" class="login-section" style="display: none;">
    <div class="login-container">
        <div class="login-header">
            <div class="login-logo">âš™ï¸</div>
            <h1 style="font-size: 1.3rem; line-height: 1.3; font-weight: normal;">PANNELLO AMMINISTRAZIONE</h1>
            <p style="font-size: 0.8rem; margin-top: 8px; font-style: italic;">Accademia delle Lingue</p>
        </div>
        <div class="login-body">
            <div id="adminLoginError" class="alert alert-error" style="display: none;"></div>
            <form id="adminLoginForm">
                <div class="form-group">
                    <label class="form-label">Email Amministratore</label>
                    <input type="email" id="adminEmail" class="form-input" required placeholder="admin@accademia.it"/>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="adminPassword" class="form-input" required placeholder="Inserire password"/>
                </div>
                <button type="submit" class="btn">Accedi all'Area Riservata</button>
                <div class="form-footer">
                    <p><a onclick="backToLogin()">â† Torna al login studenti</a></p>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- ==================== STUDENT DASHBOARD ==================== -->
<div id="dashboard" class="dashboard">
    <nav class="top-nav">
        <div style="display:flex;align-items:center;gap:12px; flex: 1;">
            <span style="font-size:1.5rem;">ğŸ“</span>
            <div>
                <div style="font-weight:600; letter-spacing: 0.5px;">ACCADEMIA DELLE LINGUE</div>
                <div style="font-size:0.7rem; opacity:0.8; font-style:italic;">Nucleo Educativo per la Formazione Europea al Lavoro Internazionale</div>
                <div style="font-size:0.65rem; opacity:0.7;">Livello A1 - C2 QCER</div>
            </div>
        </div>
        <button class="mobile-menu-toggle" onclick="toggleSidebar()" style="display: none;">
            â˜°
        </button>
        <div style="display:flex;align-items:center;gap:20px;">
            <div style="text-align:right;">
                <div id="userNameDisplay" style="font-weight:600; font-family: Georgia, serif;">Studente</div>
                <div id="userClassDisplay" style="font-size:0.8rem;opacity:0.8;">Livello QCER</div>
            </div>
            <button onclick="logout()" style="background:rgba(255,255,255,0.15);border:1px solid rgba(255,255,255,0.3);color:white;padding:8px 16px;cursor:pointer; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 0.5px;">Logout</button>
        </div>
    </nav>

    <div class="main-container">
        <aside class="sidebar">
            <div class="menu-category">Generale</div>
            <div class="nav-item active" onclick="showSection('home')" id="nav-home">
                <span>ğŸ </span><span>Cruscotto</span>
            </div>
            <div class="nav-item" onclick="showSection('results')" id="nav-results">
                <span>ğŸ“Š</span><span>Registro Valutazioni</span>
            </div>

            <div class="menu-category" style="color: #8b0000; border-bottom-color: #8b0000;">ğŸ“ Simulazioni Esami</div>
            <div class="nav-item" onclick="showSection('simulazioni-cecol')" id="nav-simulazioni">
                <span>ğŸ“</span><span>Simulazioni CECOL</span><span class="nav-level" style="background: #8b0000; color: white;">ALL</span>
            </div>

            <div class="menu-category">Livello A1 - Principiante</div>
            <div class="nav-item" onclick="loadModule('modulo_a1_alfabeto.html', 'Alfabeto e Fonologia')" id="nav-a1-alfabeto">
                <span>ğŸ”¤</span><span>Alfabeto e Fonologia</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a1_articoli_det.html', 'Articoli Determinativi')" id="nav-a1-artdet">
                <span>ğŸ“°</span><span>Articoli Determinativi</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a1_articoli_indet.html', 'Articoli Indeterminativi')" id="nav-a1-artind">
                <span>ğŸ“„</span><span>Articoli Indeterminativi</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a1_essere_avere.html', 'Verbi Essere e Avere')" id="nav-a1-essere">
                <span>ğŸ­</span><span>Verbi Essere e Avere</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a1_presentarsi.html', 'Presentarsi')" id="nav-a1-presentarsi">
                <span>ğŸ‘‹</span><span>Presentarsi</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a1_numeri.html', 'Numeri ed EtÃ ')" id="nav-a1-numeri">
                <span>ğŸ”¢</span><span>Numeri ed EtÃ </span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a1_verbi.html', 'Verbi -ARE -ERE -IRE')" id="nav-a1-verbi">
                <span>âœï¸</span><span>Verbi -ARE -ERE -IRE</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a1_piacere.html', 'Verbo Piacere')" id="nav-a1-piacere">
                <span>â¤ï¸</span><span>Verbo Piacere</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a1_riflessivi.html', 'Verbi Riflessivi')" id="nav-a1-riflessivi">
                <span>ğŸ”„</span><span>Verbi Riflessivi</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a1_passato.html', 'Passato Prossimo')" id="nav-a1-passato">
                <span>â°</span><span>Passato Prossimo</span><span class="nav-level level-a1">A1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a1_ascolto.html', 'Prova di Ascolto A1')" id="nav-a1-ascolto">
                <span>ğŸ§</span><span>Prova di Ascolto A1</span><span class="nav-level level-a1">A1</span>
            </div>

            <div class="menu-category">Livello A2 - Elementare</div>
            <div class="nav-item" onclick="loadModule('modulo_a2_imperfetto.html', 'L\'Imperfetto')" id="nav-a2-imperfetto">
                <span>â³</span><span>L'Imperfetto</span><span class="nav-level level-a2">A2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a2_preposizioni.html', 'Preposizioni Articolate')" id="nav-a2-prep">
                <span>ğŸ”—</span><span>Preposizioni Articolate</span><span class="nav-level level-a2">A2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a2_modali.html', 'Verbi Modali')" id="nav-a2-modali">
                <span>ğŸª</span><span>Verbi Modali</span><span class="nav-level level-a2">A2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a2_futuro.html', 'Il Futuro')" id="nav-a2-futuro">
                <span>ğŸ”®</span><span>Il Futuro</span><span class="nav-level level-a2">A2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_a2_personalita.html', 'La PersonalitÃ ')" id="nav-a2-personalita">
                <span>ğŸ­</span><span>La PersonalitÃ </span><span class="nav-level level-a2">A2</span>
            </div>

            <div class="menu-category">Livello B1 - Intermedio</div>
            <div class="nav-item" onclick="loadModule('modulo_b1_trapassato.html', 'Trapassato Prossimo')" id="nav-b1-trapassato">
                <span>â®ï¸</span><span>Trapassato Prossimo</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b1_congiuntivo.html', 'Congiuntivo Presente')" id="nav-b1-congiuntivo">
                <span>ğŸ¯</span><span>Congiuntivo Presente</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b1_condizionale.html', 'Condizionale Presente e Passato')" id="nav-b1-condizionale">
                <span>ğŸ²</span><span>Condizionale</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b1_pronomi_combinati.html', 'Pronomi Combinati')" id="nav-b1-pronomi">
                <span>ğŸ”—</span><span>Pronomi Combinati</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b1_passivo.html', 'Passivo')" id="nav-b1-passivo">
                <span>ğŸ”„</span><span>Passivo</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b1_ipotetico.html', 'Periodo Ipotetico')" id="nav-b1-ipotetico">
                <span>ğŸŒ³</span><span>Periodo Ipotetico</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b1_relativi.html', 'Pronomi Relativi')" id="nav-b1-relativi">
                <span>ğŸ“</span><span>Pronomi Relativi</span><span class="nav-level level-b1">B1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b1_discorso_indiretto.html', 'Discorso Indiretto')" id="nav-b1-discorso">
                <span>ğŸ’¬</span><span>Discorso Indiretto</span><span class="nav-level level-b1">B1</span>
            </div>
            
            
            
            

            <div class="menu-category">Livello B2 - Avanzato</div>
            <div class="nav-item" onclick="loadModule('modulo_b2_congiuntivo_passato.html', 'Congiuntivo Passato')" id="nav-b2-congiuntivo-passato">
                <span>âª</span><span>Congiuntivo Passato</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b2_congiuntivo_imperfetto.html', 'Congiuntivo Imperfetto e Trapassato')" id="nav-b2-congiuntivo-imperfetto">
                <span>ğŸ­</span><span>Congiuntivo Imperfetto</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b2_modi_indiretti.html', 'Modi Indiretti')" id="nav-b2-modi-indiretti">
                <span>ğŸ”„</span><span>Modi Indiretti</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b2_connettivi_avanzati.html', 'Connettivi Avanzati')" id="nav-b2-connettivi">
                <span>ğŸ”—</span><span>Connettivi Avanzati</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b2_espressione_formale.html', 'Espressione Formale')" id="nav-b2-formale">
                <span>ğŸ“œ</span><span>Espressione Formale</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b2_struttura_testuale.html', 'Struttura Testuale')" id="nav-b2-testuale">
                <span>ğŸ“Š</span><span>Struttura Testuale</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b2_italiano_lavoro.html', 'Italiano del Lavoro')" id="nav-b2-lavoro">
                <span>ğŸ’¼</span><span>Italiano del Lavoro</span><span class="nav-level level-b2">B2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_b2_varieta_regionali.html', 'VarietÃ  Regionali')" id="nav-b2-regionali">
                <span>ğŸ—ºï¸</span><span>VarietÃ  Regionali</span><span class="nav-level level-b2">B2</span>
            </div>

            <div class="menu-category">Livello C1 - Avanzato/Autonomo</div>
            <div class="nav-item" onclick="loadModule('modulo_c1_sintassi_avanzata.html', 'Sintassi Avanzata')" id="nav-c1-sintassi">
                <span>ğŸ§©</span><span>Sintassi Avanzata</span><span class="nav-level" style="background: #6b21a8; color: white;">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c1_testuale_avanzato.html', 'Organizzazione Testuale Avanzata')" id="nav-c1-testuale">
                <span>ğŸ“‘</span><span>Organizzazione Testuale</span><span class="nav-level" style="background: #6b21a8; color: white;">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c1_stilistica.html', 'Stilistica e Figure Retoriche')" id="nav-c1-stilistica">
                <span>âœ¨</span><span>Stilistica</span><span class="nav-level" style="background: #6b21a8; color: white;">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c1_linguaggio_giuridico.html', 'Linguaggio Giuridico')" id="nav-c1-giuridico">
                <span>âš–ï¸</span><span>Linguaggio Giuridico</span><span class="nav-level" style="background: #6b21a8; color: white;">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c1_economico_finanziario.html', 'Linguaggio Economico-Finanziario')" id="nav-c1-economico">
                <span>ğŸ’¹</span><span>Economico-Finanziario</span><span class="nav-level" style="background: #6b21a8; color: white;">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c1_medico_scientifico.html', 'Linguaggio Medico-Scientifico')" id="nav-c1-medico">
                <span>ğŸ”¬</span><span>Medico-Scientifico</span><span class="nav-level" style="background: #6b21a8; color: white;">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c1_variazione_diastatica.html', 'Variazione Diastatica')" id="nav-c1-diastatica">
                <span>ğŸ“Š</span><span>Variazione Diastatica</span><span class="nav-level" style="background: #6b21a8; color: white;">C1</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c1_intertestualita.html', 'IntertestualitÃ  e Citazione')" id="nav-c1-intertestualita">
                <span>ğŸ­</span><span>IntertestualitÃ </span><span class="nav-level" style="background: #6b21a8; color: white;">C1</span>
            </div>

            <div class="menu-category">Livello C2 - Maestria/Proficient</div>
            <div class="nav-item" onclick="loadModule('modulo_c2_ermeneutica.html', 'Ermeneutica e Interpretazione')" id="nav-c2-ermeneutica">
                <span>ğŸ”®</span><span>Ermeneutica</span><span class="nav-level" style="background: #0f172a; color: white;">C2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c2_filosofico_letterario.html', 'Linguaggio Filosofico e Letterario')" id="nav-c2-filosofico">
                <span>ğŸ“š</span><span>Filosofico-Letterario</span><span class="nav-level" style="background: #0f172a; color: white;">C2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c2_negotiation.html', 'Negoziazione e Mediazione')" id="nav-c2-negotiation">
                <span>ğŸ¤</span><span>Negoziazione</span><span class="nav-level" style="background: #0f172a; color: white;">C2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c2_traduzione.html', 'Traduzione e Versione Avanzata')" id="nav-c2-traduzione">
                <span>ğŸŒ</span><span>Traduzione</span><span class="nav-level" style="background: #0f172a; color: white;">C2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c2_politico_istituzionale.html', 'Linguaggio Politico-Istituzionale')" id="nav-c2-politico">
                <span>ğŸ›ï¸</span><span>Politico-Istituzionale</span><span class="nav-level" style="background: #0f172a; color: white;">C2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c2_giornalismo_investigativo.html', 'Giornalismo Investigativo')" id="nav-c2-giornalismo">
                <span>ğŸ“°</span><span>Giornalismo Investigativo</span><span class="nav-level" style="background: #0f172a; color: white;">C2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c2_creativita.html', 'CreativitÃ  Linguistica')" id="nav-c2-creativita">
                <span>ğŸ¨</span><span>CreativitÃ  Linguistica</span><span class="nav-level" style="background: #0f172a; color: white;">C2</span>
            </div>
            <div class="nav-item" onclick="loadModule('modulo_c2_competenza_plurilingue.html', 'Competenza Plurilingue')" id="nav-c2-plurilingue">
                <span>ğŸŒ</span><span>Competenza Plurilingue</span><span class="nav-level" style="background: #0f172a; color: white;">C2</span>
            </div>
        </aside>

        <main class="content">
            <!-- HOME -->
            <div id="home" class="section active">
                <div class="breadcrumbs">
                    <strong>Seleziona Livello QCER</strong>
                </div>
                <div style="margin-bottom:32px;">
                    <h1 class="section-title">Benvenuto, <span id="welcomeName">Studente</span></h1>
                    <p class="section-subtitle">Selezionare il livello di competenza linguistico per accedere ai moduli didattici</p>
                </div>

                <div class="level-selector">
                    <div class="level-card active" onclick="showLevel('a1')">
                        <div class="level-icon" style="color: var(--level-a1);">ğŸŒ±</div>
                        <div class="level-name" style="color: var(--level-a1);">A1</div>
                        <div class="level-desc">Principiante<br>11 moduli disponibili</div>
                    </div>
                    <div class="level-card" onclick="showLevel('a2')">
                        <div class="level-icon" style="color: var(--level-a2);">ğŸŒ¿</div>
                        <div class="level-name" style="color: var(--level-a2);">A2</div>
                        <div class="level-desc">Elementare<br>5 moduli disponibili</div>
                    </div>
                    <div class="level-card" onclick="showLevel('b1')">
                        <div class="level-icon" style="color: var(--level-b1);">ğŸŒ³</div>
                        <div class="level-name" style="color: var(--level-b1);">B1</div>
                        <div class="level-desc">Intermedio<br>8 moduli disponibili</div>
                    </div>
                    <div class="level-card" onclick="showLevel('b2')">
                        <div class="level-icon" style="color: var(--level-b2);">ğŸ†</div>
                        <div class="level-name" style="color: var(--level-b2);">B2</div>
                        <div class="level-desc">Avanzato<br>8 moduli disponibili</div>
                    </div>
                    <div class="level-card" onclick="showLevel('c1')">
                        <div class="level-icon" style="color: #6b21a8;">ğŸ“</div>
                        <div class="level-name" style="color: #6b21a8;">C1</div>
                        <div class="level-desc">Autonomo<br>8 moduli disponibili</div>
                    </div>
                    <div class="level-card" onclick="showLevel('c2')">
                        <div class="level-icon" style="color: #0f172a;">ğŸ‘‘</div>
                        <div class="level-name" style="color: #0f172a;">C2</div>
                        <div class="level-desc">Maestria<br>8 moduli disponibili</div>
                    </div>
                </div>

                <!-- Dashboard A1 -->
                <div id="dashboard-a1" class="level-dashboard">
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:32px;">
                        <div class="stat-card">
                            <div class="stat-label">Moduli A1 Completati</div>
                            <div class="stat-value" id="statTotalA1">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Media A1</div>
                            <div class="stat-value" id="statAvgA1">0%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Progresso A1</div>
                            <div class="stat-value" id="statProgressA1">0/11</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" style="background: var(--level-a1); color: white; border-color: var(--level-a1);">
                            Programma Formativo A1 - Principiante (QCER)
                        </div>
                        <div class="card-body">
                            <div class="games-grid">
                                <a href="modulo_a1_alfabeto.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-alfabeto')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">ğŸ”¤</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 1: Alfabeto e Fonologia</div>
                                        <p class="game-desc">Studio del sistema alfabetico italiano (21 lettere) e relative corrispondenze fonetiche</p>
                                    </div>
                                </a>
                                <a href="modulo_a1_articoli_det.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-artdet')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">ğŸ“°</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 2: Articoli Determinativi</div>
                                        <p class="game-desc">Il, lo, la, i, gli, le - Uso e regole morfosintattiche</p>
                                    </div>
                                </a>
                                <a href="modulo_a1_articoli_indet.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-artind')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">ğŸ“„</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 3: Articoli Indeterminativi</div>
                                        <p class="game-desc">Un, uno, una - Concetti di indeterminatezza e specificitÃ </p>
                                    </div>
                                </a>
                                <a href="modulo_a1_essere_avere.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-essere')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">ğŸ­</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 4: Verbi Ausiliari</div>
                                        <p class="game-desc">Essere e Avere - Coniugazione e usi principali</p>
                                    </div>
                                </a>
                                <a href="modulo_a1_presentarsi.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-presentarsi')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">ğŸ‘‹</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 5: Presentarsi</div>
                                        <p class="game-desc">Chiamarsi, abitare, venire da - Espressioni di identitÃ  personale</p>
                                    </div>
                                </a>
                                <a href="modulo_a1_numeri.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-numeri')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">ğŸ”¢</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 6: Numeri ed EtÃ </div>
                                        <p class="game-desc">Sistema numerico 0-100 e espressione dell'etÃ </p>
                                    </div>
                                </a>
                                <a href="modulo_a1_verbi.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-verbi')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">âœï¸</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 7: Coniugazioni Verbali</div>
                                        <p class="game-desc">Verbi regolari in -ARE, -ERE, -IRE - Presente indicativo</p>
                                    </div>
                                </a>
                                <a href="modulo_a1_piacere.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-piacere')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">â¤ï¸</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 8: Verbo Piacere</div>
                                        <p class="game-desc">Struttura sintattica e accordi - Mi piace / Ti piace</p>
                                    </div>
                                </a>
                                <a href="modulo_a1_riflessivi.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-riflessivi')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">ğŸ”„</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 9: Verbi Riflessivi</div>
                                        <p class="game-desc">Mi alzo, ti lavi... - Azioni riflessive e reciproche</p>
                                    </div>
                                </a>
                                <a href="modulo_a1_passato.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-passato')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">â°</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 10: Passato Prossimo</div>
                                        <p class="game-desc">Ho mangiato / Sono andato - Formazione e ausiliari</p>
                                    </div>
                                </a>
                                <a href="modulo_a1_ascolto.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a1-ascolto')">
                                    <span class="game-level-badge level-a1">A1</span>
                                    <div class="game-image bg-a1">ğŸ§</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 11: Prova di Ascolto</div>
                                        <p class="game-desc">Comprensione orale - Certificazione A1 QCER</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dashboard A2 -->
                <div id="dashboard-a2" class="level-dashboard" style="display: none;">
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:32px;">
                        <div class="stat-card">
                            <div class="stat-label">Moduli A2 Completati</div>
                            <div class="stat-value" id="statTotalA2">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Media A2</div>
                            <div class="stat-value" id="statAvgA2">0%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Progresso A2</div>
                            <div class="stat-value" id="statProgressA2">0/5</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" style="background: var(--level-a2); color: white; border-color: var(--level-a2);">
                            Programma Formativo A2 - Elementare (QCER)
                        </div>
                        <div class="card-body">
                            <div class="games-grid">
                                <a href="modulo_a2_imperfetto.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a2-imperfetto')">
                                    <span class="game-level-badge level-a2">A2</span>
                                    <div class="game-image bg-a2">â³</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 1: L'Imperfetto</div>
                                        <p class="game-desc">Il tempo del passato per descrizioni, abitudini e azioni in corso</p>
                                    </div>
                                </a>
                                <a href="modulo_a2_preposizioni.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a2-prep')">
                                    <span class="game-level-badge level-a2">A2</span>
                                    <div class="game-image bg-a2">ğŸ”—</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 2: Preposizioni Articolate</div>
                                        <p class="game-desc">Unione di preposizioni semplici e articoli determinativi</p>
                                    </div>
                                </a>
                                <a href="modulo_a2_modali.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a2-modali')">
                                    <span class="game-level-badge level-a2">A2</span>
                                    <div class="game-image bg-a2">ğŸª</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 3: Verbi Modali</div>
                                        <p class="game-desc">Potere, Dovere, Volere - Sintassi e semantica modale</p>
                                    </div>
                                </a>
                                <a href="modulo_a2_futuro.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a2-futuro')">
                                    <span class="game-level-badge level-a2">A2</span>
                                    <div class="game-image bg-a2">ğŸ”®</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 4: Il Futuro</div>
                                        <p class="game-desc">Futuro semplice e prossimo: forme regolari e irregolari</p>
                                    </div>
                                </a>
                                <a href="modulo_a2_personalita.html" target="contentFrame" class="game-card" onclick="activateNav('nav-a2-personalita')">
                                    <span class="game-level-badge level-a2">A2</span>
                                    <div class="game-image bg-a2">ğŸ­</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 5: La PersonalitÃ </div>
                                        <p class="game-desc">Aggettivi per descrivere il carattere e il comportamento</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                

                <!-- Dashboard C1 - Avanzato/Proficient -->
                <div id="dashboard-c1" class="level-dashboard" style="display: none;">
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:32px;">
                        <div class="stat-card">
                            <div class="stat-label">Moduli C1 Completati</div>
                            <div class="stat-value" id="statTotalC1">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Media C1</div>
                            <div class="stat-value" id="statAvgC1">0%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Progresso C1</div>
                            <div class="stat-value" id="statProgressC1">0/8</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" style="background: #6b21a8; color: white; border-color: #6b21a8;">
                            Programma Formativo C1 - Avanzato/Autonomo (QCER)
                        </div>
                        <div class="card-body">
                            <div class="games-grid">
                                <a href="modulo_c1_sintassi_avanzata.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c1-sintassi')">
                                    <span class="game-level-badge" style="background: #6b21a8; color: white;">C1</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #6b21a8 0%, #4c1d95 100%); border-color: #6b21a8; color: white;">ğŸ§©</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 1: Sintassi Avanzata</div>
                                        <p class="game-desc">Dislocazioni, frasi scisse, inversioni. Strutture complesse e marcate</p>
                                    </div>
                                </a>
                                <a href="modulo_c1_testuale_avanzato.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c1-testuale')">
                                    <span class="game-level-badge" style="background: #6b21a8; color: white;">C1</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #6b21a8 0%, #4c1d95 100%); border-color: #6b21a8; color: white;">ğŸ“‘</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 2: Organizzazione Testuale Avanzata</div>
                                        <p class="game-desc">Tesi, antitesi, synthesi. Articoli scientifici e saggi argomentativi</p>
                                    </div>
                                </a>
                                <a href="modulo_c1_stilistica.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c1-stilistica')">
                                    <span class="game-level-badge" style="background: #6b21a8; color: white;">C1</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #6b21a8 0%, #4c1d95 100%); border-color: #6b21a8; color: white;">âœ¨</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 3: Stilistica e Figure Retoriche</div>
                                        <p class="game-desc">Metafore, metonimie, ironia. Analisi dello stile letterario e giornalistico</p>
                                    </div>
                                </a>
                                <a href="modulo_c1_linguaggio_giuridico.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c1-giuridico')">
                                    <span class="game-level-badge" style="background: #6b21a8; color: white;">C1</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #6b21a8 0%, #4c1d95 100%); border-color: #6b21a8; color: white;">âš–ï¸</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 4: Linguaggio Giuridico e Amministrativo</div>
                                        <p class="game-desc">Terminologia giuridica, contratti, atti amministrativi. Precisione terminologica</p>
                                    </div>
                                </a>
                                <a href="modulo_c1_economico_finanziario.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c1-economico')">
                                    <span class="game-level-badge" style="background: #6b21a8; color: white;">C1</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #6b21a8 0%, #4c1d95 100%); border-color: #6b21a8; color: white;">ğŸ’¹</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 5: Linguaggio Economico-Finanziario</div>
                                        <p class="game-desc">Bilanci, report finanziari, analisi di mercato. Registro specialistico</p>
                                    </div>
                                </a>
                                <a href="modulo_c1_medico_scientifico.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c1-medico')">
                                    <span class="game-level-badge" style="background: #6b21a8; color: white;">C1</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #6b21a8 0%, #4c1d95 100%); border-color: #6b21a8; color: white;">ğŸ”¬</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 6: Linguaggio Medico-Scientifico</div>
                                        <p class="game-desc">Articoli scientifici, referti medici, terminologia tecnica. Registro oggettivo</p>
                                    </div>
                                </a>
                                <a href="modulo_c1_variazione_diastatica.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c1-diastatica')">
                                    <span class="game-level-badge" style="background: #6b21a8; color: white;">C1</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #6b21a8 0%, #4c1d95 100%); border-color: #6b21a8; color: white;">ğŸ“Š</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 7: Variazione Diastatica e Diastratica</div>
                                        <p class="game-desc">Registri formali, informali, slang. Adattamento situazionale del linguaggio</p>
                                    </div>
                                </a>
                                <a href="modulo_c1_intertestualita.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c1-intertestualita')">
                                    <span class="game-level-badge" style="background: #6b21a8; color: white;">C1</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #6b21a8 0%, #4c1d95 100%); border-color: #6b21a8; color: white;">ğŸ­</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 8: IntertestualitÃ  e Citazione</div>
                                        <p class="game-desc">Citazione, parafrasi, allusione. Dialogo tra testi e competenza intertestuale</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dashboard C2 - Maestria/Proficient -->
                <div id="dashboard-c2" class="level-dashboard" style="display: none;">
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:32px;">
                        <div class="stat-card">
                            <div class="stat-label">Moduli C2 Completati</div>
                            <div class="stat-value" id="statTotalC2">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Media C2</div>
                            <div class="stat-value" id="statAvgC2">0%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Progresso C2</div>
                            <div class="stat-value" id="statProgressC2">0/8</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" style="background: #0f172a; color: white; border-color: #0f172a;">
                            Programma Formativo C2 - Maestria/Proficient (QCER)
                        </div>
                        <div class="card-body">
                            <div class="games-grid">
                                <a href="modulo_c2_ermeneutica.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c2-ermeneutica')">
                                    <span class="game-level-badge" style="background: #0f172a; color: white;">C2</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: #0f172a; color: white;">ğŸ”®</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 1: Ermeneutica e Interpretazione</div>
                                        <p class="game-desc">Analisi profonda di testi complessi. Inferenze implicite e sottintesi culturali</p>
                                    </div>
                                </a>
                                <a href="modulo_c2_filosofico_letterario.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c2-filosofico')">
                                    <span class="game-level-badge" style="background: #0f172a; color: white;">C2</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: #0f172a; color: white;">ğŸ“š</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 2: Linguaggio Filosofico e Letterario</div>
                                        <p class="game-desc">Concetti astratti, metalinguaggio, critica letteraria. Pensiero complesso</p>
                                    </div>
                                </a>
                                <a href="modulo_c2_negotiation.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c2-negotiation')">
                                    <span class="game-level-badge" style="background: #0f172a; color: white;">C2</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: #0f172a; color: white;">ğŸ¤</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 3: Negoziazione e Mediazione Linguistica</div>
                                        <p class="game-desc">Risoluzione conflitti, mediazione culturale. Competenza pragmatica avanzata</p>
                                    </div>
                                </a>
                                <a href="modulo_c2_traduzione.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c2-traduzione')">
                                    <span class="game-level-badge" style="background: #0f172a; color: white;">C2</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: #0f172a; color: white;">ğŸŒ</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 4: Traduzione e Versione Avanzata</div>
                                        <p class="game-desc">Equivalenza traduttiva, calchi, false friends. Competenza interlinguistica</p>
                                    </div>
                                </a>
                                <a href="modulo_c2_politico_istituzionale.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c2-politico')">
                                    <span class="game-level-badge" style="background: #0f172a; color: white;">C2</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: #0f172a; color: white;">ğŸ›ï¸</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 5: Linguaggio Politico-Istituzionale</div>
                                        <p class="game-desc">Discorsi politici, diplomatici, istituzionali. Eufemismi e manipolazione</p>
                                    </div>
                                </a>
                                <a href="modulo_c2_giornalismo_investigativo.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c2-giornalismo')">
                                    <span class="game-level-badge" style="background: #0f172a; color: white;">C2</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: #0f172a; color: white;">ğŸ“°</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 6: Giornalismo Investigativo e Dossier</div>
                                        <p class="game-desc">Reportage complessi, inchieste, documentazione. Fact-checking avanzato</p>
                                    </div>
                                </a>
                                <a href="modulo_c2_creativita.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c2-creativita')">
                                    <span class="game-level-badge" style="background: #0f172a; color: white;">C2</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: #0f172a; color: white;">ğŸ¨</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 7: CreativitÃ  Linguistica e Neologia</div>
                                        <p class="game-desc">Invenzione lessicale, giochi di parole, sperimentalismo. LibertÃ  creativa</p>
                                    </div>
                                </a>
                                <a href="modulo_c2_competenza_plurilingue.html" target="contentFrame" class="game-card" onclick="activateNav('nav-c2-plurilingue')">
                                    <span class="game-level-badge" style="background: #0f172a; color: white;">C2</span>
                                    <div class="game-image" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: #0f172a; color: white;">ğŸŒ</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 8: Competenza Plurilingue e Interculturale</div>
                                        <p class="game-desc">Transcodifica, code-switching, competenza comunicativa completa. Cittadinanza globale</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Dashboard B1/B2 Coming Soon -->
                <div id="dashboard-b1" class="level-dashboard" style="display: none;">
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:32px;">
                        <div class="stat-card">
                            <div class="stat-label">Moduli B1 Completati</div>
                            <div class="stat-value" id="statTotalB1">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Media B1</div>
                            <div class="stat-value" id="statAvgB1">0%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Progresso B1</div>
                            <div class="stat-value" id="statProgressB1">0/8</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" style="background: var(--level-b1); color: #000; border-color: var(--level-b1);">
                            Programma Formativo B1 - Intermedio (QCER)
                        </div>
                        <div class="card-body">
                            <div class="games-grid">
                                <a href="modulo_b1_trapassato.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b1-trapassato')">
                                    <span class="game-level-badge level-b1">B1</span>
                                    <div class="game-image bg-b1">â®ï¸</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 1: Trapassato Prossimo</div>
                                        <p class="game-desc">Il tempo dell'anterioritÃ : avevo fatto, ero andato. Uso nel discorso narrativo</p>
                                    </div>
                                </a>
                                <a href="modulo_b1_congiuntivo.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b1-congiuntivo')">
                                    <span class="game-level-badge level-b1">B1</span>
                                    <div class="game-image bg-b1">ğŸ¯</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 2: Congiuntivo Presente</div>
                                        <p class="game-desc">Modo verbale per esprimere opinione, dubbio, emozione. Forme regolari e irregolari</p>
                                    </div>
                                </a>
                                <a href="modulo_b1_condizionale.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b1-condizionale')">
                                    <span class="game-level-badge level-b1">B1</span>
                                    <div class="game-image bg-b1">ğŸ²</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 3: Condizionale Presente e Passato</div>
                                        <p class="game-desc">Vorrei, avrei fatto. Ipotesi, cortesia, consigli nel presente e nel passato</p>
                                    </div>
                                </a>
                                <a href="modulo_b1_pronomi_combinati.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b1-pronomi')">
                                    <span class="game-level-badge level-b1">B1</span>
                                    <div class="game-image bg-b1">ğŸ”—</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 4: Pronomi Combinati</div>
                                        <p class="game-desc">Me lo, te la, glielo. Unione di pronomi diretti e indiretti</p>
                                    </div>
                                </a>
                                <a href="modulo_b1_passivo.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b1-passivo')">
                                    <span class="game-level-badge level-b1">B1</span>
                                    <div class="game-image bg-b1">ğŸ”„</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 5: Passivo</div>
                                        <p class="game-desc">La casa Ã¨ stata costruita. Formazione con essere e venire, uso dell'agente</p>
                                    </div>
                                </a>
                                <a href="modulo_b1_ipotetico.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b1-ipotetico')">
                                    <span class="game-level-badge level-b1">B1</span>
                                    <div class="game-image bg-b1">ğŸŒ³</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 6: Periodo Ipotetico</div>
                                        <p class="game-desc">Se fossi ricco, comprerei... Primo, secondo e terzo tipo</p>
                                    </div>
                                </a>
                                <a href="modulo_b1_relativi.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b1-relativi')">
                                    <span class="game-level-badge level-b1">B1</span>
                                    <div class="game-image bg-b1">ğŸ“</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 7: Pronomi Relativi</div>
                                        <p class="game-desc">Che, cui, il quale. Collegamento di proposizioni e precisione lessicale</p>
                                    </div>
                                </a>
                                <a href="modulo_b1_discorso_indiretto.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b1-discorso')">
                                    <span class="game-level-badge level-b1">B1</span>
                                    <div class="game-image bg-b1">ğŸ’¬</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 8: Discorso Indiretto</div>
                                        <p class="game-desc">Ha detto che... Trasformazione dei tempi e modi verbali</p>
                                    </div>
                                </a>
                                
                                
                                
                                
                            </div>
                        </div>
                    </div>
                </div>

                <div id="dashboard-b2" class="level-dashboard" style="display: none;">
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:32px;">
                        <div class="stat-card">
                            <div class="stat-label">Moduli B2 Completati</div>
                            <div class="stat-value" id="statTotalB2">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Media B2</div>
                            <div class="stat-value" id="statAvgB2">0%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Progresso B2</div>
                            <div class="stat-value" id="statProgressB2">0/8</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" style="background: var(--level-b2); color: white; border-color: var(--level-b2);">
                            Programma Formativo B2 - Avanzato (QCER)
                        </div>
                        <div class="card-body">
                            <div class="games-grid">
                                <a href="modulo_b2_congiuntivo_passato.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b2-congiuntivo-passato')">
                                    <span class="game-level-badge level-b2">B2</span>
                                    <div class="game-image bg-b2">âª</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 1: Congiuntivo Passato</div>
                                        <p class="game-desc">Che io abbia fatto, che tu fossi andato. Uso nel passato e concordanze temporali</p>
                                    </div>
                                </a>
                                <a href="modulo_b2_congiuntivo_imperfetto.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b2-congiuntivo-imperfetto')">
                                    <span class="game-level-badge level-b2">B2</span>
                                    <div class="game-image bg-b2">ğŸ­</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 2: Congiuntivo Imperfetto e Trapassato</div>
                                        <p class="game-desc">Che io facessi, che io avessi fatto. IrrealtÃ  nel presente e nel passato</p>
                                    </div>
                                </a>
                                <a href="modulo_b2_modi_indiretti.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b2-modi-indiretti')">
                                    <span class="game-level-badge level-b2">B2</span>
                                    <div class="game-image bg-b2">ğŸ”„</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 3: Modi Indiretti (Infinito e Gerundio)</div>
                                        <p class="game-desc">Forme nominali del verbo: infinito, gerundio, participio. Concordanza dei tempi</p>
                                    </div>
                                </a>
                                <a href="modulo_b2_connettivi_avanzati.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b2-connettivi')">
                                    <span class="game-level-badge level-b2">B2</span>
                                    <div class="game-image bg-b2">ğŸ”—</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 4: Connettivi e Marcatori Discorsivi</div>
                                        <p class="game-desc">Pur tuttavia, malgrado, in quanto. Coesione testuale avanzata</p>
                                    </div>
                                </a>
                                <a href="modulo_b2_espressione_formale.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b2-formale')">
                                    <span class="game-level-badge level-b2">B2</span>
                                    <div class="game-image bg-b2">ğŸ“œ</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 5: Espressione Formale e Registro</div>
                                        <p class="game-desc">Linguaggio formale, informale, burocratico. Lettere e documenti ufficiali</p>
                                    </div>
                                </a>
                                <a href="modulo_b2_struttura_testuale.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b2-testuale')">
                                    <span class="game-level-badge level-b2">B2</span>
                                    <div class="game-image bg-b2">ğŸ“Š</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 6: Struttura Testuale Avanzata</div>
                                        <p class="game-desc">Articoli di opinione, saggio breve, relazioni. Organizzazione argomentativa</p>
                                    </div>
                                </a>
                                <a href="modulo_b2_italiano_lavoro.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b2-lavoro')">
                                    <span class="game-level-badge level-b2">B2</span>
                                    <div class="game-image bg-b2">ğŸ’¼</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 7: Italiano del Lavoro e Professionale</div>
                                        <p class="game-desc">CV, lettere di presentazione, colloqui. Linguaggio settoriale specialistico</p>
                                    </div>
                                </a>
                                <a href="modulo_b2_varieta_regionali.html" target="contentFrame" class="game-card" onclick="activateNav('nav-b2-regionali')">
                                    <span class="game-level-badge level-b2">B2</span>
                                    <div class="game-image bg-b2">ğŸ—ºï¸</div>
                                    <div class="game-content">
                                        <div class="game-title">Modulo 8: VarietÃ  Regionali e Neoformazioni</div>
                                        <p class="game-desc">Dialetti, regionalismi, neologismi. Italiano contemporaneo e sociale</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- IFRAME SECTION - Per i moduli esterni -->
            <div id="module-frame" class="section">
                <div class="breadcrumbs" id="module-breadcrumbs">
                    <span onclick="showSection('home')" style="cursor: pointer;">Home</span> / 
                    <strong id="current-module-name">Modulo</strong>
                </div>
                <div class="iframe-container">
                    <iframe name="contentFrame" class="content-iframe" src="about:blank"></iframe>
                </div>
            </div>

            <!-- B1/B2 Coming Soon -->
            <div id="b1-coming-soon" class="section">
                <div class="breadcrumbs">
                    <span onclick="showSection('home')" style="cursor: pointer;">Home</span> / <strong>Livello B1</strong>
                </div>
                <div style="margin:24px 0;">
                    <h1 class="section-title">Livello B1 - Intermedio</h1>
                </div>
                <div class="card">
                    <div class="card-body" style="text-align: center; padding: 80px;">
                        <div style="font-size: 5rem; margin-bottom: 24px;">ğŸš§</div>
                        <h2 style="color: var(--level-b1); margin-bottom: 16px;">Moduli in fase di sviluppo</h2>
                        <button class="btn btn-b1" onclick="showSection('home')" style="margin-top: 32px; max-width: 300px; color: #000;">Torna al Cruscotto</button>
                    </div>
                </div>
            </div>

            <div id="b2-coming-soon" class="section">
                <div class="breadcrumbs">
                    <span onclick="showSection('home')" style="cursor: pointer;">Home</span> / <strong>Livello B2</strong>
                </div>
                <div style="margin:24px 0;">
                    <h1 class="section-title">Livello B2 - Avanzato</h1>
                </div>
                <div class="card">
                    <div class="card-body" style="text-align: center; padding: 80px;">
                        <div style="font-size: 5rem; margin-bottom: 24px;">ğŸš§</div>
                        <h2 style="color: var(--level-b2); margin-bottom: 16px;">Moduli in fase di sviluppo</h2>
                        <button class="btn btn-b2" onclick="showSection('home')" style="margin-top: 32px; max-width: 300px;">Torna al Cruscotto</button>
                    </div>
                </div>
            </div>

            <!-- RESULTS -->
            <div id="results" class="section">
                <div class="breadcrumbs">
                    <span onclick="showSection('home')" style="cursor: pointer;">Home</span> / <strong>Registro Valutazioni</strong>
                </div>
                <div style="margin:24px 0;">
                    <h1 class="section-title">Registro Valutazioni</h1>
                    <p class="section-subtitle">Riepilogo dei punteggi e del progresso formativo per livello QCER</p>
                </div>
                <div style="display: flex; gap: 12px; margin-bottom: 24px; flex-wrap: wrap;">
                    <button class="btn" onclick="filterResults('all')" style="width: auto; padding: 10px 20px; font-size: 0.85rem;">Tutti i livelli</button>
                    <button class="btn btn-a1" onclick="filterResults('a1')" style="width: auto; padding: 10px 20px; font-size: 0.85rem;">Solo A1</button>
                    <button class="btn btn-a2" onclick="filterResults('a2')" style="width: auto; padding: 10px 20px; font-size: 0.85rem;">Solo A2</button>
                    <button class="btn btn-b1" onclick="filterResults('b1')" style="width: auto; padding: 10px 20px; font-size: 0.85rem; color: #000;">Solo B1</button>
                    <button class="btn btn-b2" onclick="filterResults('b2')" style="width: auto; padding: 10px 20px; font-size: 0.85rem;">Solo B2</button>
                    <button class="btn" onclick="filterResults('c1')" style="width: auto; padding: 10px 20px; font-size: 0.85rem; background: #6b21a8;">Solo C1</button>
                    <button class="btn" onclick="filterResults('c2')" style="width: auto; padding: 10px 20px; font-size: 0.85rem; background: #0f172a;">Solo C2</button>
                </div>
                <div class="card">
                    <div class="card-body">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 2px solid var(--border);">
                                    <th style="text-align: left; padding: 12px; font-size: 0.875rem; text-transform: uppercase; color: var(--text-secondary);">Modulo</th>
                                    <th style="text-align: center; padding: 12px; font-size: 0.875rem; text-transform: uppercase; color: var(--text-secondary);">Livello</th>
                                    <th style="text-align: center; padding: 12px; font-size: 0.875rem; text-transform: uppercase; color: var(--text-secondary);">Data</th>
                                    <th style="text-align: center; padding: 12px; font-size: 0.875rem; text-transform: uppercase; color: var(--text-secondary);">Punteggio</th>
                                    <th style="text-align: center; padding: 12px; font-size: 0.875rem; text-transform: uppercase; color: var(--text-secondary);">Stato</th>
                                </tr>
                            </thead>
                            <tbody id="resultsTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- SIMULAZIONI ESAMI CECOL -->
            <div id="simulazioni-cecol" class="section">
                <div class="breadcrumbs">
                    <span onclick="showSection('home')" style="cursor: pointer;">Home</span> / <strong>Simulazioni Esami CECOL</strong>
                </div>
                <div style="margin:24px 0;">
                    <h1 class="section-title" style="border-color: #8b0000;">ğŸ“ Simulazioni Esami CECOL</h1>
                    <p class="section-subtitle">Prova simulazioni complete per la certificazione QCER - Tutti i livelli A1-C2</p>
                </div>

                <!-- Livello A1 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: var(--level-a1); color: white; border-color: var(--level-a1);">
                        Simulazione Livello A1 - Principiante
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_a1.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-a1')">
                                <span class="game-level-badge level-a1">A1</span>
                                <div class="game-image bg-a1">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo A1</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello A1 - Lettura, scrittura, ascolto</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Livello A2 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: var(--level-a2); color: white; border-color: var(--level-a2);">
                        Simulazione Livello A2 - Elementare
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_a2.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-a2')">
                                <span class="game-level-badge level-a2">A2</span>
                                <div class="game-image bg-a2">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo A2</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello A2 - Tutte le competenze</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Livello B1 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: var(--level-b1); color: #000; border-color: var(--level-b1);">
                        Simulazione Livello B1 - Intermedio
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_b1.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-b1')">
                                <span class="game-level-badge level-b1">B1</span>
                                <div class="game-image bg-b1">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo B1</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello B1 - Certificazione intermedia</p>
                                </div>
                            </a>
                            <a href="esame_finale_b1_cittadinanza.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-b1-citt')">
                                <span class="game-level-badge level-b1">B1</span>
                                <div class="game-image bg-b1">ğŸ‡®ğŸ‡¹</div>
                                <div class="game-content">
                                    <div class="game-title">Esame B1 Cittadinanza</div>
                                    <p class="game-desc">Simulazione specifica per il test di cittadinanza italiana</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Livello B2 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: var(--level-b2); color: white; border-color: var(--level-b2);">
                        Simulazione Livello B2 - Avanzato
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_b2.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-b2')">
                                <span class="game-level-badge level-b2">B2</span>
                                <div class="game-image bg-b2">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo B2</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello B2 - Avanzato</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Livello C1 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: #6b21a8; color: white; border-color: #6b21a8;">
                        Simulazione Livello C1 - Autonomo
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_c1.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-c1')">
                                <span class="game-level-badge" style="background: #6b21a8; color: white;">C1</span>
                                <div class="game-image" style="background: linear-gradient(135deg, #6b21a8 0%, #4c1d95 100%); border-color: #6b21a8; color: white;">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo C1</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello C1 - Competenza autonoma</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Livello C2 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: #0f172a; color: white; border-color: #0f172a;">
                        Simulazione Livello C2 - Maestria
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_c2.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-c2')">
                                <span class="game-level-badge" style="background: #0f172a; color: white;">C2</span>
                                <div class="game-image" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: #0f172a; color: white;">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo C2</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello C2 - Maestria linguistica</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- ==================== ADMIN DASHBOARD ==================== -->
<div id="adminDashboard" class="dashboard" style="display: none;">
    <nav class="top-nav">
        <div style="display:flex;align-items:center;gap:12px;">
            <span style="font-size:1.5rem;">âš™ï¸</span>
            <div>
                <div style="font-weight:600; letter-spacing: 0.5px;">PANNELLO AMMINISTRAZIONE</div>
                <div style="font-size:0.7rem; opacity:0.8; font-style:italic;">Accademia delle Lingue</div>
            </div>
        </div>
        <div style="display:flex;align-items:center;gap:20px;">
            <div style="text-align:right;">
                <div style="font-weight:600; font-family: Georgia, serif;">Amministratore</div>
                <div style="font-size:0.8rem;opacity:0.8;">Area Riservata</div>
            </div>
            <button onclick="adminLogout()" style="background:rgba(255,255,255,0.15);border:1px solid rgba(255,255,255,0.3);color:white;padding:8px 16px;cursor:pointer; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 0.5px;">Logout</button>
        </div>
    </nav>

    <div class="main-container">
        <aside class="sidebar">
            <div class="menu-category">Generale</div>
            <div class="nav-item active" onclick="showAdminSection('admin-home')" id="nav-admin-home">
                <span>ğŸ“Š</span><span>Dashboard</span>
            </div>
            <div class="menu-category">Gestione Accessi</div>
            <div class="nav-item" onclick="showAdminSection('admin-requests')" id="nav-admin-requests">
                <span>ğŸ“</span><span>Richieste Accesso</span>
            </div>
            <div class="nav-item" onclick="showAdminSection('admin-users')" id="nav-admin-users">
                <span>ğŸ‘¥</span><span>Gestione Utenti</span>
            </div>
            <div class="menu-category">Dati e Report</div>
            <div class="nav-item" onclick="showAdminSection('admin-scores')" id="nav-admin-scores">
                <span>ğŸ“ˆ</span><span>Punteggi Studenti</span>
            </div>
            <div class="nav-item" onclick="showAdminSection('admin-passwords')" id="nav-admin-passwords">
                <span>ğŸ”</span><span>Generatore Password</span>
            </div>
            <div class="menu-category">Sistema</div>
            <div class="nav-item" onclick="backToLogin()">
                <span>ğŸ“</span><span>Torna alla Piattaforma</span>
            </div>
        </aside>

        <main class="content">
            <!-- ADMIN HOME -->
            <div id="admin-home" class="section active">
                <div class="breadcrumbs">
                    <strong>Dashboard Amministrativa</strong>
                </div>
                <div style="margin-bottom:32px;">
                    <h1 class="section-title">Pannello di Controllo</h1>
                    <p class="section-subtitle">Gestione completa della piattaforma e monitoraggio studenti</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Utenti Totali</div>
                        <div class="stat-value" id="admin-stat-users">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Richieste in Attesa</div>
                        <div class="stat-value" id="admin-stat-pending">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Test Completati</div>
                        <div class="stat-value" id="admin-stat-scores">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Media Punteggi</div>
                        <div class="stat-value" id="admin-stat-avg">0%</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">ğŸ“¤ Esportazione Dati</div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-secondary);">Scarica i dati della piattaforma in formato Excel (CSV)</p>
                        <button class="btn btn-success" onclick="exportScores()" style="width: auto; display: inline-block; margin-right: 1rem;">ğŸ“Š Esporta Punteggi</button>
                        <button class="btn" onclick="exportUsers()" style="width: auto; display: inline-block;">ğŸ‘¥ Esporta Utenti</button>
                    </div>
                </div>
            </div>

            <!-- ADMIN REQUESTS -->
            <div id="admin-requests" class="section">
                <div class="breadcrumbs">
                    <span onclick="showAdminSection('admin-home')" style="cursor: pointer;">Dashboard</span> / <strong>Richieste Accesso</strong>
                </div>
                <div style="margin:24px 0;">
                    <h1 class="section-title">Richieste di Accesso</h1>
                    <p class="section-subtitle">Approva o rifiuta le richieste di registrazione degli studenti</p>
                </div>
                <div class="card">
                    <div class="card-header">Elenco Richieste in Attesa</div>
                    <div class="card-body">
                        <table class="data-table" id="requests-table">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Nome</th>
                                    <th>Email</th>
                                    <th>Motivazione</th>
                                    <th>Azioni</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ADMIN USERS -->
            <div id="admin-users" class="section">
                <div class="breadcrumbs">
                    <span onclick="showAdminSection('admin-home')" style="cursor: pointer;">Dashboard</span> / <strong>Gestione Utenti</strong>
                </div>
                <div style="margin:24px 0;">
                    <h1 class="section-title">Utenti Registrati</h1>
                    <p class="section-subtitle">Visualizza e gestisci gli account degli studenti</p>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Elenco Studenti</span>
                            <button class="btn btn-success" onclick="addUser()" style="width: auto; padding: 8px 16px; font-size: 0.85rem;">â• Aggiungi Utente</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <table class="data-table" id="users-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nome</th>
                                    <th>Email</th>
                                    <th>Password</th>
                                    <th>Azioni</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ADMIN SCORES -->
            <div id="admin-scores" class="section">
                <div class="breadcrumbs">
                    <span onclick="showAdminSection('admin-home')" style="cursor: pointer;">Dashboard</span> / <strong>Punteggi Studenti</strong>
                </div>
                <div style="margin:24px 0;">
                    <h1 class="section-title">Registro Valutazioni</h1>
                    <p class="section-subtitle">Monitora i progressi e i risultati degli studenti</p>
                </div>
                <div class="card">
                    <div class="card-header">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Elenco Punteggi</span>
                            <button class="btn btn-success" onclick="exportScores()" style="width: auto; padding: 8px 16px; font-size: 0.85rem;">ğŸ“Š Esporta Excel</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <table class="data-table" id="scores-table">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Studente</th>
                                    <th>Email</th>
                                    <th>Modulo</th>
                                    <th>Punteggio</th>
                                    <th>%</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- ADMIN PASSWORDS -->
            <div id="admin-passwords" class="section">
                <div class="breadcrumbs">
                    <span onclick="showAdminSection('admin-home')" style="cursor: pointer;">Dashboard</span> / <strong>Generatore Password</strong>
                </div>
                <div style="margin:24px 0;">
                    <h1 class="section-title">Generatore Password Sicure</h1>
                    <p class="section-subtitle">Crea password robuste per gli account degli studenti</p>
                </div>
                <div class="card">
                    <div class="card-header">Genera Nuova Password</div>
                    <div class="card-body">
                        <div class="password-box">
                            <p style="margin-bottom: 1rem;">Clicca il pulsante per generare una password sicura di 12 caratteri</p>
                            <div class="password-display" id="generated-password">...</div>
                            <button class="btn" onclick="generatePassword()" style="width: auto; display: inline-block; margin-right: 1rem;">ğŸ”„ Genera Password</button>
                            <button class="btn btn-success" onclick="copyPassword()" style="width: auto; display: inline-block;">ğŸ“‹ Copia</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SIMULAZIONI ESAMI CECOL -->
            <div id="simulazioni-cecol" class="section">
                <div class="breadcrumbs">
                    <span onclick="showSection('home')" style="cursor: pointer;">Home</span> / <strong>Simulazioni Esami CECOL</strong>
                </div>
                <div style="margin:24px 0;">
                    <h1 class="section-title" style="border-color: #8b0000;">ğŸ“ Simulazioni Esami CECOL</h1>
                    <p class="section-subtitle">Prova simulazioni complete per la certificazione QCER - Tutti i livelli A1-C2</p>
                </div>

                <!-- Livello A1 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: var(--level-a1); color: white; border-color: var(--level-a1);">
                        Simulazione Livello A1 - Principiante
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_a1.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-a1')">
                                <span class="game-level-badge level-a1">A1</span>
                                <div class="game-image bg-a1">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo A1</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello A1 - Lettura, scrittura, ascolto</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Livello A2 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: var(--level-a2); color: white; border-color: var(--level-a2);">
                        Simulazione Livello A2 - Elementare
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_a2.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-a2')">
                                <span class="game-level-badge level-a2">A2</span>
                                <div class="game-image bg-a2">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo A2</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello A2 - Tutte le competenze</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Livello B1 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: var(--level-b1); color: #000; border-color: var(--level-b1);">
                        Simulazione Livello B1 - Intermedio
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_b1.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-b1')">
                                <span class="game-level-badge level-b1">B1</span>
                                <div class="game-image bg-b1">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo B1</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello B1 - Certificazione intermedia</p>
                                </div>
                            </a>
                            <a href="esame_finale_b1_cittadinanza.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-b1-citt')">
                                <span class="game-level-badge level-b1">B1</span>
                                <div class="game-image bg-b1">ğŸ‡®ğŸ‡¹</div>
                                <div class="game-content">
                                    <div class="game-title">Esame B1 Cittadinanza</div>
                                    <p class="game-desc">Simulazione specifica per il test di cittadinanza italiana</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Livello B2 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: var(--level-b2); color: white; border-color: var(--level-b2);">
                        Simulazione Livello B2 - Avanzato
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_b2.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-b2')">
                                <span class="game-level-badge level-b2">B2</span>
                                <div class="game-image bg-b2">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo B2</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello B2 - Avanzato</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Livello C1 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: #6b21a8; color: white; border-color: #6b21a8;">
                        Simulazione Livello C1 - Autonomo
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_c1.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-c1')">
                                <span class="game-level-badge" style="background: #6b21a8; color: white;">C1</span>
                                <div class="game-image" style="background: linear-gradient(135deg, #6b21a8 0%, #4c1d95 100%); border-color: #6b21a8; color: white;">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo C1</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello C1 - Competenza autonoma</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Livello C2 -->
                <div class="card" style="margin-bottom: 24px;">
                    <div class="card-header" style="background: #0f172a; color: white; border-color: #0f172a;">
                        Simulazione Livello C2 - Maestria
                    </div>
                    <div class="card-body">
                        <div class="games-grid">
                            <a href="esame_finale_c2.html" target="contentFrame" class="game-card" onclick="activateNav('nav-sim-c2')">
                                <span class="game-level-badge" style="background: #0f172a; color: white;">C2</span>
                                <div class="game-image" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); border-color: #0f172a; color: white;">ğŸ“</div>
                                <div class="game-content">
                                    <div class="game-title">Esame Completo C2</div>
                                    <p class="game-desc">Simulazione completa esame CECOL livello C2 - Maestria linguistica</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<script>
// ==================== DATABASE ====================
let db = { users: [], requests: [], scores: [] };

function initDB() {
    const stored = localStorage.getItem('accademia_data');
    if (stored) {
        db = JSON.parse(stored);
    } else {
        db.users.push({
            id: 'admin001',
            email: 'admin@accademia.it',
            password: 'Admin2024!',
            name: 'Amministratore',
            role: 'admin',
            created: new Date().toISOString()
        });
        saveDB();
    }
}

function saveDB() {
    localStorage.setItem('accademia_data', JSON.stringify(db));
}

// Module info for tracking
const moduleInfo = {
    'modulo_a1_alfabeto.html': { name: 'Alfabeto e Fonologia', level: 'A1' },
    'periodo_ipotetico1.html': { name: 'Periodo Ipotetico - Alternativo', level: 'B1' },
    'preposizioni_articolate.html': { name: 'Preposizioni Articolate - Alternativo', level: 'B1' },
    'pronomi_combinati1.html': { name: 'Pronomi Combinati - Alternativo', level: 'B1' },
    'pronomi_relativi1.html': { name: 'Pronomi Relativi - Alternativo', level: 'B1' },
    'modulo_a1_articoli_det.html': { name: 'Articoli Determinativi', level: 'A1' },
    'modulo_a1_articoli_indet.html': { name: 'Articoli Indeterminativi', level: 'A1' },
    'modulo_a1_essere_avere.html': { name: 'Verbi Essere e Avere', level: 'A1' },
    'modulo_a1_presentarsi.html': { name: 'Presentarsi', level: 'A1' },
    'modulo_a1_numeri.html': { name: 'Numeri ed EtÃ ', level: 'A1' },
    'modulo_a1_verbi.html': { name: 'Verbi -ARE -ERE -IRE', level: 'A1' },
    'modulo_a1_piacere.html': { name: 'Verbo Piacere', level: 'A1' },
    'modulo_a1_riflessivi.html': { name: 'Verbi Riflessivi', level: 'A1' },
    'modulo_a1_passato.html': { name: 'Passato Prossimo', level: 'A1' },
    'modulo_a1_ascolto.html': { name: 'Prova di Ascolto A1', level: 'A1' },
    'modulo_a2_imperfetto.html': { name: 'L\'Imperfetto', level: 'A2' },
    'modulo_a2_preposizioni.html': { name: 'Preposizioni Articolate', level: 'A2' },
    'modulo_a2_modali.html': { name: 'Verbi Modali', level: 'A2' },
    'modulo_a2_futuro.html': { name: 'Il Futuro', level: 'A2' },
    'modulo_a2_personalita.html': { name: 'La PersonalitÃ ', level: 'A2' }
};

// ==================== PASSWORD FUNCTIONS ====================
function checkPasswordStrength() {
    const password = document.getElementById('loginPassword').value;
    const bars = [
        document.getElementById('bar1'),
        document.getElementById('bar2'),
        document.getElementById('bar3'),
        document.getElementById('bar4')
    ];
    const strengthText = document.getElementById('strengthText');
    
    bars.forEach(bar => bar.className = 'strength-bar');
    
    if (password.length === 0) {
        strengthText.textContent = 'Digita la password per vedere la forza';
        strengthText.style.color = 'var(--text-secondary)';
        return;
    }
    
    let strength = 0;
    if (password.length >= 6) strength++;
    if (password.length >= 10) strength++;
    if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
    if (/[0-9]/.test(password) && /[^a-zA-Z0-9]/.test(password)) strength++;
    
    for (let i = 0; i < strength; i++) {
        if (bars[i]) {
            if (strength <= 2) bars[i].classList.add('weak');
            else if (strength === 3) bars[i].classList.add('medium');
            else bars[i].classList.add('strong');
        }
    }
    
    const texts = ['Password molto debole', 'Password debole', 'Password media', 'Password buona', 'Password eccellente'];
    strengthText.textContent = texts[strength] || 'Digita la password';
    strengthText.style.color = strength <= 2 ? 'var(--error)' : strength === 3 ? 'var(--accent)' : 'var(--success)';
}

// ==================== LOGIN FUNCTIONS ====================
document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    
    if (password.length < 6) {
        document.getElementById('loginError').textContent = 'La password deve essere di almeno 6 caratteri';
        document.getElementById('loginError').style.display = 'block';
        return;
    }
    
    // Check if user exists in DB
    const user = db.users.find(u => u.email === email && u.password === password && u.role !== 'admin');
    if (!user) {
        // Demo mode - allow any login
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('dashboard').style.display = 'flex';
        
        const name = email.split('@')[0].replace(/\./g, ' ').replace(/\b\w/g, l => l.toUpperCase());
        document.getElementById('welcomeName').textContent = name;
        document.getElementById('userNameDisplay').textContent = name;
        
        let level = 'A1';
        if (password.includes('B2')) level = 'B2';
        else if (password.includes('B1')) level = 'B1';
        else if (password.includes('A2')) level = 'A2';
        document.getElementById('userClassDisplay').textContent = 'Livello ' + level + ' QCER';
    } else {
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('dashboard').style.display = 'flex';
        document.getElementById('welcomeName').textContent = user.name;
        document.getElementById('userNameDisplay').textContent = user.name;
        document.getElementById('userClassDisplay').textContent = 'Livello QCER';
    }
    
    loadResults();
    updateStats();
});

function logout() {
    document.getElementById('loginSection').style.display = 'flex';
    document.getElementById('dashboard').style.display = 'none';
    document.getElementById('loginPassword').value = '';
    document.getElementById('loginEmail').value = '';
    checkPasswordStrength();
}

function backToLogin() {
    document.getElementById('requestAccess').style.display = 'none';
    document.getElementById('adminLoginSection').style.display = 'none';
    document.getElementById('loginSection').style.display = 'flex';
}

function showAdminLogin() {
    document.getElementById('loginSection').style.display = 'none';
    document.getElementById('adminLoginSection').style.display = 'flex';
}

function showRequestAccess() {
    document.getElementById('loginSection').style.display = 'none';
    document.getElementById('requestAccess').style.display = 'flex';
}

// ==================== REQUEST ACCESS ====================
document.getElementById('requestForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const name = document.getElementById('reqName').value.trim();
    const email = document.getElementById('reqEmail').value.trim();
    const motivation = document.getElementById('reqMotivation').value.trim();

    if (!name || !email || !motivation) {
        showRequestAlert('error', 'Compila tutti i campi obbligatori');
        return;
    }

    const requestData = {
        id: 'req_' + Date.now(),
        name: name,
        email: email,
        motivation: motivation,
        status: 'pending',
        created: new Date().toISOString()
    };

    if (!db.requests) db.requests = [];
    db.requests.push(requestData);
    saveDB();

    showRequestAlert('success', 'Richiesta inviata con successo! Riceverai una risposta entro 48 ore.');
    document.getElementById('requestForm').reset();
    
    setTimeout(function() {
        backToLogin();
    }, 3000);
});

function showRequestAlert(type, message) {
    const alertBox = document.getElementById('requestAlert');
    alertBox.className = 'alert alert-' + type;
    alertBox.textContent = (type === 'success' ? 'âœ… ' : 'âŒ ') + message;
    alertBox.style.display = 'block';
}

// ==================== ADMIN LOGIN ====================
document.getElementById('adminLoginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = document.getElementById('adminEmail').value;
    const password = document.getElementById('adminPassword').value;

    if (email === 'admin@accademia.it' && password === 'Admin2024!') {
        document.getElementById('adminLoginSection').style.display = 'none';
        document.getElementById('adminDashboard').style.display = 'flex';
        updateAdminStats();
        loadAdminRequests();
        loadAdminUsers();
        loadAdminScores();
    } else {
        document.getElementById('adminLoginError').textContent = 'Credenziali non valide';
        document.getElementById('adminLoginError').style.display = 'block';
    }
});

function adminLogout() {
    document.getElementById('adminDashboard').style.display = 'none';
    document.getElementById('adminLoginSection').style.display = 'flex';
    document.getElementById('adminPassword').value = '';
}

// ==================== NAVIGATION ====================
function showSection(sectionId) {
    // Hide all sections
    document.querySelectorAll('.section').forEach(section => {
        section.classList.remove('active');
    });
    
    // Show target section
    const targetSection = document.getElementById(sectionId);
    if (targetSection) {
        targetSection.classList.add('active');
    }
    
    // Update nav items
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
    });
    
    const navItem = document.getElementById('nav-' + sectionId);
    if (navItem) navItem.classList.add('active');
}

function showAdminSection(sectionId) {
    document.querySelectorAll('#adminDashboard .section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('#adminDashboard .nav-item').forEach(n => n.classList.remove('active'));
    
    document.getElementById(sectionId).classList.add('active');
    document.getElementById('nav-' + sectionId).classList.add('active');
    
    if (sectionId === 'admin-requests') loadAdminRequests();
    if (sectionId === 'admin-users') loadAdminUsers();
    if (sectionId === 'admin-scores') loadAdminScores();
}

function activateNav(navId) {
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
    });
    const navItem = document.getElementById(navId);
    if (navItem) navItem.classList.add('active');
}

function loadModule(url, moduleName) {
    showSection('module-frame');
    document.getElementById('current-module-name').textContent = moduleName;
    
    // Activate corresponding nav item based on URL
    const navMap = {
        'modulo_a1_alfabeto.html': 'nav-a1-alfabeto',
        'modulo_a1_articoli_det.html': 'nav-a1-artdet',
        'modulo_a1_articoli_indet.html': 'nav-a1-artind',
        'modulo_a1_essere_avere.html': 'nav-a1-essere',
        'modulo_a1_presentarsi.html': 'nav-a1-presentarsi',
        'modulo_a1_numeri.html': 'nav-a1-numeri',
        'modulo_a1_verbi.html': 'nav-a1-verbi',
        'modulo_a1_piacere.html': 'nav-a1-piacere',
        'modulo_a1_riflessivi.html': 'nav-a1-riflessivi',
        'modulo_a1_passato.html': 'nav-a1-passato',
        'modulo_a1_ascolto.html': 'nav-a1-ascolto',
        'modulo_a2_imperfetto.html': 'nav-a2-imperfetto',
        'modulo_a2_preposizioni.html': 'nav-a2-prep',
        'modulo_a2_modali.html': 'nav-a2-modali',
        'modulo_a2_futuro.html': 'nav-a2-futuro',
        'modulo_a2_personalita.html': 'nav-a2-personalita',
        'esame_finale_a1.html': 'nav-sim-a1',
        'esame_finale_a2.html': 'nav-sim-a2',
        'esame_finale_b1.html': 'nav-sim-b1',
        'esame_finale_b1_cittadinanza.html': 'nav-sim-b1-citt',
        'esame_finale_b2.html': 'nav-sim-b2',
        'esame_finale_c1.html': 'nav-sim-c1',
        'esame_finale_c2.html': 'nav-sim-c2',
        'modulo_b1_trapassato.html': 'nav-b1-trapassato',
        'modulo_b1_congiuntivo.html': 'nav-b1-congiuntivo',
        'modulo_b1_condizionale.html': 'nav-b1-condizionale',
        'modulo_b1_pronomi_combinati.html': 'nav-b1-pronomi',
        'modulo_b1_passivo.html': 'nav-b1-passivo',
        'modulo_b1_ipotetico.html': 'nav-b1-ipotetico',
        'modulo_b1_relativi.html': 'nav-b1-relativi',
        'modulo_b1_discorso_indiretto.html': 'nav-b1-discorso',
        'periodo_ipotetico1.html': 'nav-b1-ipotetico1',
        'preposizioni_articolate.html': 'nav-b1-prep-art',
        'pronomi_combinati1.html': 'nav-b1-pronomi1',
        'pronomi_relativi1.html': 'nav-b1-relativi1',
        'modulo_b2_congiuntivo_passato.html': 'nav-b2-congiuntivo-passato',
        'modulo_b2_congiuntivo_imperfetto.html': 'nav-b2-congiuntivo-imperfetto',
        'modulo_b2_modi_indiretti.html': 'nav-b2-modi-indiretti',
        'modulo_b2_connettivi_avanzati.html': 'nav-b2-connettivi',
        'modulo_b2_espressione_formale.html': 'nav-b2-formale',
        'modulo_b2_struttura_testuale.html': 'nav-b2-testuale',
        'modulo_b2_italiano_lavoro.html': 'nav-b2-lavoro',
        'modulo_b2_varieta_regionali.html': 'nav-b2-regionali',
        'modulo_c1_sintassi_avanzata.html': 'nav-c1-sintassi',
        'modulo_c1_testuale_avanzato.html': 'nav-c1-testuale',
        'modulo_c1_stilistica.html': 'nav-c1-stilistica',
        'modulo_c1_linguaggio_giuridico.html': 'nav-c1-giuridico',
        'modulo_c1_economico_finanziario.html': 'nav-c1-economico',
        'modulo_c1_medico_scientifico.html': 'nav-c1-medico',
        'modulo_c1_variazione_diastatica.html': 'nav-c1-diastatica',
        'modulo_c1_intertestualita.html': 'nav-c1-intertestualita',
        'modulo_c2_ermeneutica.html': 'nav-c2-ermeneutica',
        'modulo_c2_filosofico_letterario.html': 'nav-c2-filosofico',
        'modulo_c2_negotiation.html': 'nav-c2-negotiation',
        'modulo_c2_traduzione.html': 'nav-c2-traduzione',
        'modulo_c2_politico_istituzionale.html': 'nav-c2-politico',
        'modulo_c2_giornalismo_investigativo.html': 'nav-c2-giornalismo',
        'modulo_c2_creativita.html': 'nav-c2-creativita',
        'modulo_c2_competenza_plurilingue.html': 'nav-c2-plurilingue'
    };
    
    if (navMap[url]) {
        activateNav(navMap[url]);
    }
    
    // Set iframe src
    const iframe = document.querySelector('iframe[name="contentFrame"]');
    if (iframe) {
        iframe.src = url;
    }
}

function showLevel(level) {
    document.querySelectorAll('.level-dashboard').forEach(d => d.style.display = 'none');
    const targetDashboard = document.getElementById('dashboard-' + level);
    if (targetDashboard) targetDashboard.style.display = 'block';
    
    document.querySelectorAll('.level-card').forEach(card => card.classList.remove('active'));
    if (event && event.currentTarget) event.currentTarget.classList.add('active');
}

function backToHome() {
    showSection('home');
    // Clear iframe
    const iframe = document.querySelector('iframe[name="contentFrame"]');
    if (iframe) iframe.src = 'about:blank';
}

// ==================== RESULTS ====================
let userResults = [];

function loadResults() {
    const userEmail = document.getElementById('loginEmail').value || 'demo@student.it';
    const userScores = db.scores ? db.scores.filter(s => s.userEmail === userEmail) : [];
    
    userResults = Object.keys(moduleInfo).map(url => {
        const info = moduleInfo[url];
        const score = userScores.find(s => s.moduleName === info.name);
        return {
            moduleUrl: url,
            score: score ? score.percentage : 0,
            date: score ? new Date(score.completedAt).toLocaleDateString('it-IT') : '-',
            completed: !!score
        };
    });
    
    renderResultsTable(userResults);
}

function renderResultsTable(results) {
    const tbody = document.getElementById('resultsTableBody');
    if (!tbody) return;
    tbody.innerHTML = '';
    
    results.forEach(result => {
        const info = moduleInfo[result.moduleUrl];
        if (!info) return;
        
        const row = document.createElement('tr');
        row.style.borderBottom = '1px solid var(--border)';
        
        const statusClass = result.completed ? 'status-completed' : 'status-pending';
        const statusText = result.completed ? 'Completato' : 'In corso';
        
        row.innerHTML = `
            <td style="padding: 12px; font-weight: 500;">${info.name}</td>
            <td style="padding: 12px; text-align: center;">
                <span class="nav-level level-${info.level.toLowerCase()}">${info.level}</span>
            </td>
            <td style="padding: 12px; text-align: center; color: var(--text-secondary);">${result.date}</td>
            <td style="padding: 12px; text-align: center; font-weight: 600; color: ${result.score >= 80 ? 'var(--success)' : result.score >= 60 ? 'var(--accent)' : 'var(--text-primary)'};">
                ${result.completed ? result.score + '%' : '-'}
            </td>
            <td style="padding: 12px; text-align: center;">
                <span class="status-badge ${statusClass}">${statusText}</span>
            </td>
        `;
        tbody.appendChild(row);
    });
}

function filterResults(level) {
    if (level === 'all') {
        renderResultsTable(userResults);
    } else {
        const filtered = userResults.filter(r => {
            const info = moduleInfo[r.moduleUrl];
            return info && info.level.toLowerCase() === level;
        });
        renderResultsTable(filtered);
    }
}

function updateStats() {
    const a1Modules = Object.keys(moduleInfo).filter(k => moduleInfo[k].level === 'A1');
    const a2Modules = Object.keys(moduleInfo).filter(k => moduleInfo[k].level === 'A2');
    
    const a1Completed = userResults.filter(r => a1Modules.includes(r.moduleUrl) && r.completed);
    const a2Completed = userResults.filter(r => a2Modules.includes(r.moduleUrl) && r.completed);
    
    const a1Scores = a1Completed.map(r => r.score);
    const a2Scores = a2Completed.map(r => r.score);
    
    const a1Avg = a1Scores.length > 0 ? Math.round(a1Scores.reduce((a, b) => a + b, 0) / a1Scores.length) : 0;
    const a2Avg = a2Scores.length > 0 ? Math.round(a2Scores.reduce((a, b) => a + b, 0) / a2Scores.length) : 0;
    
    const statTotalA1 = document.getElementById('statTotalA1');
    const statAvgA1 = document.getElementById('statAvgA1');
    const statProgressA1 = document.getElementById('statProgressA1');
    const statTotalA2 = document.getElementById('statTotalA2');
    const statAvgA2 = document.getElementById('statAvgA2');
    const statProgressA2 = document.getElementById('statProgressA2');
    
    if (statTotalA1) statTotalA1.textContent = a1Completed.length;
    if (statAvgA1) statAvgA1.textContent = a1Avg + '%';
    if (statProgressA1) statProgressA1.textContent = a1Completed.length + '/' + a1Modules.length;
    if (statTotalA2) statTotalA2.textContent = a2Completed.length;
    if (statAvgA2) statAvgA2.textContent = a2Avg + '%';
    if (statProgressA2) statProgressA2.textContent = a2Completed.length + '/' + a2Modules.length;
}

// ==================== ADMIN FUNCTIONS ====================
function updateAdminStats() {
    const statUsers = document.getElementById('admin-stat-users');
    const statPending = document.getElementById('admin-stat-pending');
    const statScores = document.getElementById('admin-stat-scores');
    const statAvg = document.getElementById('admin-stat-avg');
    
    if (statUsers) statUsers.textContent = db.users.filter(u => u.role !== 'admin').length;
    if (statPending) statPending.textContent = db.requests.filter(r => r.status === 'pending').length;
    if (statScores) statScores.textContent = db.scores.length;
    
    const avg = db.scores.length > 0 
        ? Math.round(db.scores.reduce((a, s) => a + s.percentage, 0) / db.scores.length)
        : 0;
    if (statAvg) statAvg.textContent = avg + '%';
}

function loadAdminRequests() {
    const tbody = document.querySelector('#requests-table tbody');
    const pending = db.requests.filter(r => r.status === 'pending');
    
    if (!tbody) return;
    
    if (pending.length === 0) {
        tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; color: var(--text-secondary); padding: 2rem;">Nessuna richiesta in attesa</td></tr>';
        return;
    }
    
    tbody.innerHTML = pending.map(r => `
        <tr>
            <td>${new Date(r.created).toLocaleDateString('it-IT')}</td>
            <td>${r.name}</td>
            <td>${r.email}</td>
            <td>${r.motivation.substring(0, 50)}...</td>
            <td>
                <button class="btn btn-success" onclick="approveRequest('${r.id}')" style="width: auto; padding: 6px 12px; font-size: 0.8rem; margin-right: 0.5rem;">âœ“ Approva</button>
                <button class="btn btn-danger" onclick="rejectRequest('${r.id}')" style="width: auto; padding: 6px 12px; font-size: 0.8rem;">âœ— Rifiuta</button>
            </td>
        </tr>
    `).join('');
}

function approveRequest(id) {
    const req = db.requests.find(r => r.id === id);
    if (!req) return;
    
    const password = generateRandomPassword();
    
    db.users.push({
        id: 'user_' + Date.now(),
        email: req.email,
        password: password,
        name: req.name,
        role: 'student',
        created: new Date().toISOString()
    });
    
    req.status = 'approved';
    saveDB();
    
    alert(`âœ… RICHIESTA APPROVATA\n\nStudente: ${req.name}\nEmail: ${req.email}\nPassword: ${password}\n\nComunica queste credenziali allo studente.`);
    
    loadAdminRequests();
    updateAdminStats();
}

function rejectRequest(id) {
    const req = db.requests.find(r => r.id === id);
    if (req) {
        req.status = 'rejected';
        saveDB();
        loadAdminRequests();
    }
}

function loadAdminUsers() {
    const tbody = document.querySelector('#users-table tbody');
    const students = db.users.filter(u => u.role !== 'admin');
    
    if (!tbody) return;
    
    if (students.length === 0) {
        tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; color: var(--text-secondary); padding: 2rem;">Nessuno studente registrato</td></tr>';
        return;
    }
    
    tbody.innerHTML = students.map(u => `
        <tr>
            <td>${u.id}</td>
            <td>${u.name}</td>
            <td>${u.email}</td>
            <td><code style="background: var(--bg-primary); padding: 4px 8px; font-family: monospace;">${u.password}</code></td>
            <td><button class="btn btn-danger" onclick="deleteUser('${u.id}')" style="width: auto; padding: 6px 12px; font-size: 0.8rem;">ğŸ—‘ï¸ Elimina</button></td>
        </tr>
    `).join('');
}

function deleteUser(id) {
    if (!confirm('Sei sicuro di voler eliminare questo utente?')) return;
    db.users = db.users.filter(u => u.id !== id);
    saveDB();
    loadAdminUsers();
    updateAdminStats();
}

function addUser() {
    const name = prompt('Nome completo:');
    if (!name) return;
    const email = prompt('Email:');
    if (!email) return;
    
    const password = generateRandomPassword();
    
    db.users.push({
        id: 'user_' + Date.now(),
        email: email,
        password: password,
        name: name,
        role: 'student',
        created: new Date().toISOString()
    });
    
    saveDB();
    alert(`âœ… Utente creato!\n\nEmail: ${email}\nPassword: ${password}`);
    loadAdminUsers();
    updateAdminStats();
}

function loadAdminScores() {
    const tbody = document.querySelector('#scores-table tbody');
    
    if (!tbody) return;
    
    if (db.scores.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: var(--text-secondary); padding: 2rem;">Nessun punteggio registrato</td></tr>';
        return;
    }
    
    tbody.innerHTML = db.scores.map(s => `
        <tr>
            <td>${new Date(s.completedAt).toLocaleDateString('it-IT')}</td>
            <td>${s.userName}</td>
            <td>${s.userEmail}</td>
            <td>${s.moduleName}</td>
            <td>${s.score}/${s.maxScore}</td>
            <td><strong>${s.percentage}%</strong></td>
        </tr>
    `).join('');
}

function generatePassword() {
    const pwd = generateRandomPassword();
    const display = document.getElementById('generated-password');
    if (display) display.textContent = pwd;
}

function generateRandomPassword() {
    const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";
    let pwd = "";
    for (let i = 0; i < 12; i++) {
        pwd += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    return pwd;
}

function copyPassword() {
    const pwd = document.getElementById('generated-password').textContent;
    if (pwd && pwd !== '...') {
        navigator.clipboard.writeText(pwd);
        alert('Password copiata negli appunti!');
    }
}

function exportScores() {
    if (db.scores.length === 0) {
        alert('Nessun punteggio da esportare');
        return;
    }
    
    const data = db.scores.map(s => ({
        Data: new Date(s.completedAt).toLocaleString('it-IT'),
        Studente: s.userName,
        Email: s.userEmail,
        Modulo: s.moduleName,
        Punteggio: s.score,
        Max: s.maxScore,
        Percentuale: s.percentage + '%'
    }));
    
    downloadCSV(data, 'punteggi_accademia');
}

function exportUsers() {
    const students = db.users.filter(u => u.role !== 'admin');
    if (students.length === 0) {
        alert('Nessun utente da esportare');
        return;
    }
    
    const data = students.map(u => ({
        ID: u.id,
        Nome: u.name,
        Email: u.email,
        Ruolo: u.role,
        'Data Registrazione': new Date(u.created).toLocaleString('it-IT')
    }));
    
    downloadCSV(data, 'utenti_accademia');
}

function downloadCSV(data, filename) {
    const headers = Object.keys(data[0]);
    let csv = headers.join(';') + '\n';
    
    data.forEach(row => {
        csv += headers.map(h => row[h]).join(';') + '\n';
    });
    
    const blob = new Blob([csv], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename + '_' + new Date().toISOString().split('T')[0] + '.csv';
    a.click();
}

// ==================== INIT ====================
window.onload = function() {
    initDB();
    checkPasswordStrength();
};

function toggleSidebar() {
    const sidebar = document.querySelector('.sidebar');
    const overlay = document.querySelector('.sidebar-overlay');

    if (!overlay) {
        const newOverlay = document.createElement('div');
        newOverlay.className = 'sidebar-overlay';
        newOverlay.onclick = toggleSidebar;
        document.body.appendChild(newOverlay);
    }

    sidebar.classList.toggle('mobile-open');
    document.querySelector('.sidebar-overlay').classList.toggle('active');
}

// Chiudi sidebar quando si clicca su un link (mobile)
document.addEventListener('DOMContentLoaded', function() {
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
        item.addEventListener('click', function() {
            if (window.innerWidth <= 768) {
                const sidebar = document.querySelector('.sidebar');
                const overlay = document.querySelector('.sidebar-overlay');
                if (sidebar && sidebar.classList.contains('mobile-open')) {
                    sidebar.classList.remove('mobile-open');
                    if (overlay) overlay.classList.remove('active');
                }
            }
        });
    });
});

</script>

</body>
</html>
